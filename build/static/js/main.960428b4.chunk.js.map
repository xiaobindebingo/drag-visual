{"version":3,"sources":["index.module.css","views/Editor/Element/ResizeWrapper/index.module.scss","components/Group/index.module.scss","views/Editor/index.module.scss","views/Editor/Element/ResizeWrapper/Circle/index.module.scss","views/AttributePanel/index.module.scss","views/Editor/MarkLine/index.module.scss","store/record.ts","store/reducers.ts","store/actionType.ts","store/index.ts","components/Alert/Alert.tsx","components/Group/index.tsx","resourceCenter/componentHash.ts","constants/index.ts","resourceCenter/componentStore.tsx","utils.ts","store/actions.ts","views/Header/index.tsx","views/ComponentPanel/index.tsx","views/Editor/GridLine/index.tsx","views/Editor/Element/ResizeWrapper/Circle/index.tsx","views/Editor/Element/ResizeWrapper/constants.ts","views/Editor/Element/ResizeWrapper/index.tsx","views/Editor/Element/index.tsx","views/Editor/MarkLine/index.tsx","views/Editor/Area/index.tsx","views/Editor/index.tsx","views/AttributePanel/index.tsx","views/Preview/index.tsx","index.tsx","views/Header/index.module.scss","views/ComponentPanel/index.module.scss"],"names":["module","exports","list","index","maxLength","curIndex","this","record","push","length","shift","console","log","componentMap","previewVisible","canvasWidth","canvasHeight","scale","selectComponentId","containIds","areaPos","startPos","left","top","endPos","reducer","state","action","type","payload","id","locked","isLocked","containerProps","style","addRecord","getPrevRecord","getNextRecord","store","createStore","reducers","window","__REDUX_DEVTOOLS_EXTENSION__","Alert","props","useState","open","setOpen","className","alertType","children","title","klass","ss","closeble","onClick","defaultProps","Group","styles","group","componentHash","hash","register","key","val","getHash","GROUP","config","icon","text","initialProps","width","height","changeState","newVal","Object","prototype","toString","call","Array","isArray","reduce","prev","cur","getClientPosByEvent","e","x","clientX","y","clientY","getElementPosByEvent","nativeEvent","offsetX","offsetY","getElementByType","Component","ComponentStore","pxToPercent","percentToPx","percent","match","absoluteToRealtiveCoordinate","innterPropsStyle","containerBox","realtiveToAbsoluteCoordinate","Math","ceil","plainDatatoTree","uuids","keys","copyComponentMap","cloneDeep","forEach","parentId","cancelRecords","updateCurContainerStyleAction","connect","model","dispatch","changeWidth","changeHeight","changeScale","updateState","step","redoRecords","addRecords","toggleLock","boxInfo","min","abs","speed","setSpeed","header","display","marginRight","max","hasTip","value","onChange","Number","playback","item","setTimeout","numberPicker","marginLeft","disabled","uuid","combineMap","includes","getCombineComponentMap","newState","selectId","splitMap","JSON","stringify","componentList","map","component","cell","draggable","onDragStart","dataTransfer","setData","src","GridLine","show","xmlns","patternUnits","d","fill","stroke","strokeWidth","Circle","position","onMouseDown","preventDefault","stopPropagation","startX","startY","move","moveEvent","curX","curY","distanceX","distanceY","updateComponentItemByPos","document","addEventListener","up","removeEventListener","circle","circleProps","cursor","right","marginTop","bottom","updateCurContainerStyle","updateSelectComponentAndOrderMap","wrapper","useRef","current","offsetWidth","offsetHeight","offsetLeft","offsetTop","isSelected","updateProps","newPropsByPos","lt","round","rt","lb","br","t","l","r","b","ref","cls","selected","zIndex","orderMap","copyObj","updateComponentMapOrder","currentTarget","onDragOver","circleProp","size","componentProps","React","Children","child","initlineArr","lineArr","setLineArr","isNearly","dragVal","targetVal","updateLineArr","curTop","curLeft","curBottom","curRight","curWidth","curHeight","getCurrentComponentsPosition","hideLine","useDeepCompareEffect","centerPos","curCenterPos","useEffect","markline","hide","hor","ver","line","boxLeft","boxTop","border","updateComponentMap","updateSelectComponent","updateAreaPos","updateComponentMapAndSelectId","showGridLine","toggleGridLine","scaleRatio","initialAreaPos","deleteElement","copyState","selectedId","filter","transferData","editor","transformOrigin","transform","handleKeys","onKeyEvent","findDOMByEventAndId","element","target","parentNode","getBoundingClientRect","componentinfo","minWrapperPos","startLeft","MAX_SAFE_INTEGER","endLeft","startTop","endTop","getMinWrapperAreaPos","onDrop","getData","updatedMap","renderElement","data","attributePanel","closeDialog","visible","onClose","onCancel","onOk","Parent","container","content","ReactDOM","render","getElementById","stats","Stats","showPanel","body","appendChild","dom","requestAnimationFrame","animate","begin","end"],"mappings":"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","file":"static/js/main.960428b4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"src_container__12MZc\",\"content\":\"src_content__110zU\",\"editor\":\"src_editor__1vpBc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selected\":\"ResizeWrapper_selected__3URnW\",\"locked\":\"ResizeWrapper_locked__1V3Aj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"group\":\"Group_group__KDQxi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"Editor_editor__vzXVZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"circle\":\"Circle_circle__18Nbv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"attributePanel\":\"AttributePanel_attributePanel__3OHup\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"markline\":\"MarkLine_markline__bJ0QZ\",\"line\":\"MarkLine_line__3GMwM\",\"hor\":\"MarkLine_hor__32M3f\",\"ver\":\"MarkLine_ver__3WRU8\",\"hide\":\"MarkLine_hide__1ShMr\"};","export const initialState = {\n  componentMap: {},\n  previewVisible: false,\n  canvasWidth: 1200,\n  canvasHeight: 750,\n  scale: 100,\n  selectComponentId: \"\",\n  containIds: [],\n  areaPos: {\n    startPos: {\n      left: 0,\n      top: 0,\n    },\n    endPos: {\n      left: 0,\n      top: 0,\n    },\n  },\n};\n\nclass Record {\n  public list: any[];\n  public maxLength: number;\n  public curIndex: number;\n  constructor(list, index, maxLength?) {\n    this.list = list;\n    this.curIndex = index;\n    this.maxLength = maxLength || 20;\n  }\n  \n  addRecord(record) {\n    this.list.push(record);\n    if(this.list.length > this.maxLength) {\n      this.list.shift();\n    }\n    this.curIndex = this.list.length - 1;\n  }\n  getPrevRecord() {\n    this.curIndex = this.curIndex > 0 ? this.curIndex - 1 : this.curIndex;\n    console.log(  this.curIndex, this.list)\n    return this.list[this.curIndex];\n  } \n\n  getNextRecord() {\n    if(this.curIndex + 1 >= this.list.length -1) {\n      this.curIndex = this.list.length -1\n    } else {\n      this.curIndex += 1;\n    }\n\n    return this.list[this.curIndex];\n  }\n\n}\n\nexport default new Record([initialState], 0, 100);\n\n","import * as actionTypes from \"./actionType\";\nimport record from \"./record\";\n\nfunction reducer(state = record.list[0], action) {\n\n  if (action.type === actionTypes.SAVE) {\n    return {\n      ...state,\n      ...action.payload,\n    };\n  }\n\n  if (action.type === actionTypes.TOGGLE_LOCK) {\n    const { id, locked } = action.payload;\n    console.log(id, locked,'locke')\n    return {\n      ...state,\n      componentMap: {\n        ...state.componentMap,\n        [id]: {\n          ...state.componentMap[id],\n          isLocked: locked,\n        }\n      }\n    }\n  }\n  \n  // 更新componentContainerStyle属性\n  if (action.type === actionTypes.UPDATE_CURCONTAINER_STYLE) {\n    const { payload } = action;\n    const { selectComponentId: id } = state;\n    return {\n      ...state,\n      componentMap: {\n        ...state.componentMap,\n        [id]: {\n          ...state.componentMap[id],\n          containerProps: {\n            ...state.componentMap[id][\"containerProps\"],\n            style: {\n              ...state.componentMap[id][\"containerProps\"][\"style\"],\n              ...payload,\n            },\n          },\n        },\n      },\n    };\n  }\n\n  if (action.type === actionTypes.SAVE_RECORDS) {\n    record.addRecord(state);\n    return state;\n  }\n\n  if (action.type === actionTypes.CANCEL_RECORDS) {\n    return  record.getPrevRecord();\n  }\n\n  if (action.type === actionTypes.REDO) {\n    return record.getNextRecord();\n  }\n\n\n  return state;\n}\n\nexport default reducer;\n","export const SAVE_RECORDS: string = 'saveRecords';\n\nexport const CANCEL_RECORDS: string = 'cancleRecords';\n\nexport const REDO: string = 'redo';\n\nexport const SAVE: string = 'save';\nexport const UPDATE_COMPOMENTMAP = 'updateComponentMap';\n\nexport const  UPDATE_CURCONTAINER_STYLE= 'updateCurContainerStyle';\n\nexport const TOGGLE_LOCK = 'toggleLock';","import { createStore } from 'redux';\nimport reducers from './reducers';\n\nlet store = createStore(reducers,\n  (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\n  (window as any).__REDUX_DEVTOOLS_EXTENSION__());\n\nexport default store;\n","import React, { useState } from 'react';\nimport ss from 'classnames';\nimport './alert.scss';\nexport type AlertType = 'success'|'danger'|'warning'|'default'\ninterface baseAlertProps{\n    className?: string,\n    alertType?: AlertType,\n    children: React.ReactNode,\n    title: React.ReactNode,\n    closeble: Boolean,\n}\nexport type AlertProps =  Partial<baseAlertProps & React.HTMLAttributes<HTMLElement>>;\nconst Alert: any = (props)=>{\n    const [open, setOpen] = useState<Boolean>(true);\n    const {className, alertType ,children, title} = props;\n    const klass = ss('alert', className, {\n        [`alert-${alertType}`]: alertType,\n        \n    })\n    return ( open ? <div className={klass}>\n        <div className=\"alert-message\">{title} { props.closeble && <span className=\"alert-close\" onClick={()=>setOpen(false)}>关闭</span>}</div>\n            <div className='alert-content'>{children}</div>\n            </div> : null)\n}\nAlert.defaultProps = {\n    alertType: 'default',\n    \n}\nexport { Alert }\nexport default Alert;","import React from 'react';\nimport styles from './index.module.scss';\n\nfunction Group(props) {\n  return (\n    <div\n      className={styles.group}\n    >\n      {props.children}\n    </div>\n  )\n}\n\nexport default Group;\n","const componentHash = () => {\n  const hash = {};\n  return {\n    register: (key, val) => {\n      hash[key] = val;\n    },\n    getHash: (key?) => {\n      if(!key) return hash;\n      return hash[key];\n    }\n  }\n}\n\nexport default componentHash();","export const GROUP = 'group';","import Alert from '../components/Alert/Alert';\nimport Group from '../components/Group';\nimport hash from './componentHash';\nimport { GROUP } from '../constants';\n\nAlert.config = {\n  icon: 'https://img.alicdn.com/tfs/TB1i4enT4v1gK0jSZFFXXb0sXXa-32-32.svg',\n  text: '弹窗',\n};\n\nAlert.initialProps = {\n   width: 200,\n   height: 100,\n   type: 'danger',\n   title: 'dangerTitle',\n   children: '哈哈'\n}\n\nhash.register('alert', Alert);\nhash.register(GROUP, Group);// group初始化一个组件\n\nexport default hash.getHash();","import ComponentStore from \"./resourceCenter/componentStore\";\nimport cloneDeep from 'lodash/cloneDeep';\n\nexport function changeBatchState(obj) {\n    return {\n      type: 'save',\n      payload: obj,\n    }\n\n}\n\nexport function changeState(key, newVal?) {\n\n  if (Object.prototype.toString.call(key) === \"[object Object]\") {\n    return {\n      type: 'save',\n      payload: key,\n    }\n  }\n  if (Array.isArray(key)) {\n    const payload = key.reduce((prev ,cur)=>{\n      return {\n        ...prev,\n        ...cur,\n      }\n    }, {});\n\n    return {\n      type: 'save',\n      payload,\n    }\n  }\n  return {\n    type: 'save',\n    payload: {[key]: newVal}\n  }\n}\n\n\nexport function getClientPosByEvent(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY,\n  }\n}\n\nexport function getElementPosByEvent(e: React.DragEvent) {\n  return {\n    left: e.nativeEvent.offsetX,\n    top: e.nativeEvent.offsetY,\n  };\n}\n\nexport function getElementByType(type) {\n    const Component = ComponentStore[type];\n    if (Component) return Component;\n    return {};\n}\n\nexport function mixinObject (oldObj, newObj) {\n  const result = {...oldObj};\n  Object.keys(newObj).forEach(key => {\n    if(typeof oldObj[key] !== newObj[key]) {\n      throw new Error(`新的对象${key}与原有对象类型不符`);\n    }\n    if(!oldObj[key]) {\n      result[key] = newObj[key]\n    }\n    if (typeof oldObj[key] === 'object' && typeof newObj[key] === 'object') {\n      result[key] = mixinObject(oldObj[key], newObj[key]);\n    }\n    if(typeof oldObj[key] !== 'object' && typeof newObj[key] !== 'object') {\n      result[key] = newObj[key];\n    }\n  })\n  return result;\n}\n\nexport function findDOMByEventAndId(e,id) {\n  let element;\n  if (e.target) {\n    element = e.target;\n  } else if (e.parentNode) {\n    element = e.parentNode\n  }\n  if(element.id !== id) {\n    return findDOMByEventAndId(element, id)\n  } else {\n    return element;\n  }\n}\n\nconst pxToPercent = val => `${val * 100}%`;\nconst percentToPx = (val, percent) => {\n  const ratio = percent.match(/\\d+/g)[0] / 100;\n  return val * ratio;\n}\n/**\n * @description 绝对坐标 -> 相对坐标\n * @param containerPropsStyle 布局盒样式\n * @param innterPropsStyle innterPropsStyle\n * @returns \n */\nexport const absoluteToRealtiveCoordinate = (innterPropsStyle, containerBox) => {\n  if (!innterPropsStyle) {\n    return { top: 0, left: 0, width: 0, height: 0 };\n  }\n  const { top, left, width, height } = innterPropsStyle;\n  const result = {\n    left: pxToPercent((left - containerBox.left) / containerBox.width),\n    top: pxToPercent((top - containerBox.top) / containerBox.height),\n    width: pxToPercent((width / containerBox.width)),\n    height:  pxToPercent((height / containerBox.height)),\n  };\n  return result;\n};\n\nexport const realtiveToAbsoluteCoordinate = (innterPropsStyle, containerBox) => {\n\n  const { top, left, width, height } = innterPropsStyle;\n  const result = {\n    left: Math.ceil(percentToPx(containerBox.width,left) + containerBox.left),\n    top: Math.ceil(percentToPx(containerBox.height, top) + containerBox.top),\n    width: Math.ceil(percentToPx(containerBox.width, width)),\n    height: Math.ceil(percentToPx(containerBox.height, height)),\n  }\n\n  return  result;\n}\n\nexport const plainDatatoTree = componentMap => {\n  const uuids = Object.keys(componentMap);\n  const copyComponentMap = cloneDeep(componentMap)\n  uuids.forEach(id => {\n    const { parentId } = copyComponentMap[id];\n    if (parentId) {\n      if(copyComponentMap[parentId].children) {\n        copyComponentMap[parentId]['children'][id] = copyComponentMap[id]\n      } else {\n        copyComponentMap[parentId]['children'] = {\n          [id]: copyComponentMap[id]\n        }\n      }\n      delete copyComponentMap[id];\n    }\n  });\n  return copyComponentMap;\n}\n","import * as actionTypes from './actionType';\n\nexport const SAVE = (payload) => ({type: actionTypes.SAVE, payload});\n\nexport const saveRecords = () => ({ type: actionTypes.SAVE_RECORDS });\n\nexport const cancelRecords = (payload) => ({ type: actionTypes.CANCEL_RECORDS , payload});\n\nexport const redoRecords = () => ({\n  type: actionTypes.REDO,\n});\n\nexport const updateCurContainerStyleAction = (payload) => ({\n  type: actionTypes.UPDATE_CURCONTAINER_STYLE,\n  payload,\n});\n\nexport const toggleLockAction = payload => ({\n  type: actionTypes.TOGGLE_LOCK,\n  payload,\n})\n\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { NumberPicker, Button, Range } from \"@ali/wind\";\nimport {\n  changeState,\n  absoluteToRealtiveCoordinate,\n  realtiveToAbsoluteCoordinate,\n} from \"../../utils\";\nimport { v4 as uuid } from \"uuid\";\nimport styles from \"./index.module.scss\";\nimport { \n  cancelRecords,\n  redoRecords,\n  saveRecords,\n  toggleLockAction,\n} from \"../../store/actions\";\nimport record from \"../../store/record\";\nimport { GROUP } from '../../constants';\n\nfunction Header(props) {\n  const {\n    model,\n    changeWidth,\n    changeHeight,\n    changeScale,\n    updateState,\n    addRecords,\n    cancelRecords,\n    redoRecords,\n    toggleLock,\n  } = props;\n  const {\n    containIds,\n    canvasWidth,\n    canvasHeight,\n    scale,\n    areaPos,\n    componentMap,\n    selectComponentId,\n  } = model;\n  const { startPos, endPos } = areaPos;\n  const boxInfo = {\n    left: Math.min(startPos.left, endPos.left),\n    top: Math.min(startPos.top, endPos.top),\n    width: Math.abs(endPos.left - startPos.left),\n    height: Math.abs(endPos.top - startPos.top),\n  };\n\n\n\n  const { isLocked } =  componentMap[selectComponentId] || {};\n  const [speed, setSpeed] = useState<number>(1000);\n\n  const playback = (state, speed) => {\n    const item = state.shift();\n    setTimeout(() => {\n      updateState(item);\n      if (state.length > 0) {\n        playback(state, 1000 / speed);\n      }\n    }, 1000 / speed);\n  };\n\n  const getCombineComponentMap = (parentId) => {\n    return Object.keys(componentMap).reduce((prev, id) => {\n      if (containIds.includes(id)) {\n        return {\n          ...prev,\n          [id]: {\n            ...componentMap[id],\n            containerProps: {\n              ...componentMap[id].containerProps,\n              style: absoluteToRealtiveCoordinate(\n                componentMap[id].containerProps?.style,\n                boxInfo\n              ),\n            },\n            parentId,\n          },\n        };\n      }\n      return { ...prev, [id]: componentMap[id] };\n    }, {});\n  };\n\n  const getSplitComponentMap = (selectId) => {\n    return Object.keys(componentMap).reduce((prev, id) => {\n      const item = componentMap[id];\n      if (item.parentId === selectId) {\n        return {\n          ...prev,\n          [id]: {\n            ...item,\n            parentId: null,\n            containerProps: {\n              ...componentMap[id].containerProps,\n              style: realtiveToAbsoluteCoordinate(\n                componentMap[id].containerProps?.style,\n                componentMap[selectId].containerProps.style\n              ),\n            },\n          },\n        };\n      } else if (selectId !== id) {\n        return {\n          ...prev,\n          [id]: item,\n        };\n      } else {\n        return { ...prev };\n      }\n    }, {});\n  };\n\n  const handleCombine = () => {\n    addRecords();\n    const parentId = uuid();\n    const combineMap = getCombineComponentMap(parentId);\n    const newState = {\n      componentMap: {\n        ...combineMap,\n        [parentId]: {\n          type: \"group\",\n          containerProps: {\n            style: {\n              ...boxInfo,\n            },\n          },\n        },\n      },\n      selectComponentId: parentId,\n      containIds: [],\n      areaPos: {\n        startPos: {\n          left: 0,\n          top: 0,\n        },\n        endPos: {\n          left: 0,\n          top: 0,\n        },\n      },\n    };\n    updateState(newState);\n    addRecords();\n  };\n\n  const handleLock = () => {\n    toggleLock({\n      id: selectComponentId,\n      locked: !isLocked,\n    })\n  }\n\n  const handleSplit = () => {\n    addRecords();\n    const { type } = componentMap[selectComponentId];\n    if (type === GROUP) {\n      const splitMap = getSplitComponentMap(selectComponentId);\n      const newState = {\n        componentMap: { ...splitMap },\n        selectComponentId: \"\",\n        containIds: [],\n        areaPos,\n      };\n      updateState(newState);\n    }\n  };\n\n  const handlePublish = () => {\n    // componentMap\n    // window.localStorage.setItem()\n    JSON.stringify(componentMap)\n  }\n\n  return (\n    <div className={styles.header}>\n      <div\n        style={{\n          display: \"flex\",\n          // flexDirection: \"column\",\n          marginRight: 50,\n        }}\n      >\n          <Range\n            style={{\n              width: 40,\n            }}\n            min={1}\n            max={10}\n            hasTip\n            value={speed}\n            onChange={(val) => setSpeed(Number(val))}\n          />\n        <Button\n          onClick={() => {\n            const records = cloneDeep(record.list);\n            playback(records, speed);\n          }}\n        >\n          回放\n        </Button>\n        </div>\n      宽：\n      <NumberPicker\n        onChange={(val) => changeWidth(val)}\n        className={styles.numberPicker}\n        value={canvasWidth}\n      />\n      高：\n      <NumberPicker\n        onChange={(val) => changeHeight(val)}\n        className={styles.numberPicker}\n        value={canvasHeight}\n      />\n      缩放：\n      <NumberPicker\n        max={500}\n        min={0}\n        onChange={(val) => changeScale(val)}\n        value={scale}\n      />\n      %\n      <div style={{ marginLeft: 16 }}>\n      <Button\n          type=\"secondary\"\n          disabled={!selectComponentId}\n          onClick={handleLock}\n        >\n          { isLocked ? \"解锁\" : \"锁定\" }\n        </Button>\n        <Button\n          type=\"primary\"\n          disabled={containIds.length <= 1}\n          onClick={handleCombine}\n        >\n          组合\n        </Button>\n        <Button\n          type=\"secondary\"\n          disabled={\n            !componentMap[selectComponentId] ||\n            componentMap[selectComponentId].type !== \"group\"\n          }\n          onClick={handleSplit}\n        >\n          拆分\n        </Button>\n        <Button onClick={cancelRecords}>撤销</Button>\n        <Button onClick={redoRecords}>重做</Button>\n        <Button\n          onClick={() =>\n            updateState({\n              ...model,\n              previewVisible: true,\n            })\n          }\n        >\n          预览\n        </Button>\n        <Button\n          onClick={handlePublish}\n        >\n          发布\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default connect(\n  (state) => ({ model: state }),\n  (dispatch) => {\n    return {\n      changeWidth: (val) => dispatch(changeState(\"canvasWidth\", val)),\n      changeHeight: (val) => dispatch(changeState(\"canvasHeight\", val)),\n      changeScale: (val) => dispatch(changeState(\"scale\", val)),\n      updateState: (val) => dispatch(changeState(val)),\n      cancelRecords: (step) => dispatch(cancelRecords(step)),\n      redoRecords: () => dispatch(redoRecords()),\n      addRecords: () => dispatch(saveRecords()),\n      toggleLock: val => dispatch(toggleLockAction(val)),\n    };\n  }\n)(Header);\n","import React from 'react';\nimport ComponentStore from '../../resourceCenter/componentStore';\nimport { connect } from 'react-redux';\nimport styles from './index.module.scss';\nimport { GROUP } from '../../constants';\n\nfunction ComponentPanel(props) {\n  return (\n    <div className={styles.componentList}>\n      {\n      Object.keys(ComponentStore).map(key=> {\n        const component = ComponentStore[key];\n        if (key === GROUP) {\n          return null;\n        }\n        return (\n          <div \n          className={styles.cell} \n          key={key} \n          draggable \n          onDragStart={\n            (e) => e.dataTransfer.setData('type', key)\n          }>\n            <img src={component?.config?.icon} />\n            <br/>\n            <div className={styles.text}>{component?.config?.text}</div>\n          </div>\n        )\n      }\n        \n      )}\n     \n\n    </div>\n  )\n}\n\nexport default connect((state)=>state,()=>({}))(ComponentPanel);","import React from 'react';\n\nexport default function GridLine (props) {\n  const { show } = props;\n\n  if (!show) {\n    return null;\n  }\n\n  return (\n     <svg \n     className=\"grid\" width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n        <defs>\n            <pattern id=\"smallGrid\" width=\"7.236328125\" height=\"7.236328125\" patternUnits=\"userSpaceOnUse\">\n                <path \n                    d=\"M 7.236328125 0 L 0 0 0 7.236328125\" \n                    fill=\"none\" \n                    stroke=\"rgba(207, 207, 207, 1)\" \n                    strokeWidth=\"1\">\n                </path>\n            </pattern>\n            <pattern id=\"grid\" width=\"36.181640625\" height=\"36.181640625\" patternUnits=\"userSpaceOnUse\">\n                <rect width=\"36.181640625\" height=\"36.181640625\" fill=\"url(#smallGrid)\"></rect>\n                <path \n                    d=\"M 36.181640625 0 L 0 0 0 36.181640625\" \n                    fill=\"none\" \n                    stroke=\"rgba(186, 186, 186, 0.5)\" \n                    strokeWidth=\"1\">\n                </path>\n            </pattern>\n        </defs>\n        <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\"></rect>\n    </svg>\n  )\n}","import React from 'react';\nimport styles from './index.module.scss';\nimport { getClientPosByEvent } from '../../../../../utils';\nimport record from '../../../../../store/record';\n\nfunction Circle (props) {\n  const { \n    position,\n    style,\n    addRecord,\n    isLocked,\n  } = props;\n  \n  const handleMouseDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const {\n      x: startX, \n      y: startY,\n    } = getClientPosByEvent(e);\n    const move = (moveEvent) => {\n      const {\n        x: curX,\n        y: curY,\n      } = getClientPosByEvent(moveEvent);\n      const distanceX = curX - startX;\n      const distanceY = curY - startY;\n      props.updateComponentItemByPos(position, {distanceX, distanceY})\n    }\n\n    const up = () => {\n      addRecord();\n      document.removeEventListener('mousemove', move);\n      document.removeEventListener('mouseup', up);\n    }\n    document.addEventListener('mousemove', move);\n    document.addEventListener('mouseup', up)\n  }\n  // const pointStyle = getpostion(position);\n  return (\n    <div\n     onMouseDown={handleMouseDown}\n     style={style}\n     className={styles.circle}\n    />\n  )\n}\n\n\nexport default Circle;\n","\nimport { CirclePos } from '../../../../types';\n\nexport const circleProps: { position: CirclePos; style: object }[] = [\n  {\n    position: \"lt\",\n    style: {\n      cursor: \"nwse-resize\",\n      left: -4,\n      top: -4,\n    },\n  },\n  {\n    position: \"t\",\n    style: {\n      cursor: \"ns-resize\",\n      left: \"50%\",\n      marginLeft: -4,\n      top: -4,\n    },\n  },\n  {\n    position: \"rt\",\n    style: {\n      right: -4,\n      top: -4,\n      cursor: \"nesw-resize\",\n    },\n  },\n  {\n    position: \"l\",\n    style: {\n      cursor: \"w-resize\",\n      left: -4,\n      top: \"50%\",\n      marginTop: -4,\n    },\n  },\n  {\n    position: \"r\",\n    style: {\n      right: -4,\n      top: \"50%\",\n      marginTop: -4,\n      cursor: \"e-resize\",\n    },\n  },\n  {\n    position: \"lb\",\n    style: {\n      cursor: \"nesw-resize\",\n      bottom: -4,\n      left: -4,\n    },\n  },\n  {\n    position: \"b\",\n    style: {\n      cursor: \"ns-resize\",\n      left: \"50%\",\n      marginLeft: -4,\n      bottom: -4,\n    },\n  },\n  {\n    position: \"br\",\n    style: {\n      cursor: \"nwse-resize\",\n      bottom: -4,\n      right: -4,\n    },\n  },\n];","import React, { useRef } from \"react\";\nimport { Icon } from '@ali/wind';\nimport { connect } from \"react-redux\";\nimport cls from \"classnames\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { changeState, getClientPosByEvent } from \"../../../../utils\";\nimport { CirclePos } from \"../../../../types\";\nimport Circle from \"./Circle\";\nimport { circleProps } from \"./constants\";\nimport styles from \"./index.module.scss\";\nimport { saveRecords, updateCurContainerStyleAction } from \"../../../../store/actions\";\n\nconst updateComponentMapOrder = (id, componentMap) => {\n  const copyObj = cloneDeep(componentMap);\n  delete copyObj[id];\n  copyObj[id] = componentMap[id];\n  return copyObj;\n};\n\nfunction ResizeWrapper(props) {\n  const {\n    containerProps,\n    model,\n    index,\n    style,\n    className,\n    id,\n    updateCurContainerStyle,\n    updateSelectComponentAndOrderMap,\n    addRecord,\n  } = props;\n\n  const {\n    componentMap,\n    selectComponentId,\n  } = model;\n\n  const wrapper = useRef<any>({});\n  const { offsetWidth, offsetHeight, offsetLeft, offsetTop } = wrapper.current;\n  const isSelected = id && id === selectComponentId;\n  const { isLocked } = componentMap[id];\n  const updateComponentItemByPos = (position: CirclePos, updateProps) => {\n    const { distanceX = 0, distanceY = 0 } = updateProps;\n    const newPropsByPos = {\n      lt: {\n        width: Math.round(offsetWidth - distanceX),\n        height: Math.round(offsetHeight - distanceY),\n        left: Math.round(offsetLeft + distanceX),\n        top: Math.round(offsetTop + distanceY),\n      },\n      rt: {\n        width: Math.round(offsetWidth + distanceX),\n        height: Math.round(offsetHeight - distanceY),\n        top: Math.round(offsetTop + distanceY),\n      },\n      lb: {\n        width: Math.round(offsetWidth - distanceX),\n        height: Math.round(offsetHeight + distanceY),\n        left: Math.round(offsetLeft + distanceX),\n      },\n      br: {\n        width: Math.round(offsetWidth + distanceX),\n        height: Math.round(offsetHeight + distanceY),\n      },\n      t: {\n        height: Math.round(offsetHeight - distanceY),\n        top: Math.round(offsetTop + distanceY),\n      },\n      l: {\n        width: Math.round(offsetWidth - distanceX),\n        left: Math.round(offsetLeft + distanceX),\n        // top: Math.round(offsetTop - distanceY),\n      },\n      r: {\n        width: Math.round(offsetWidth + distanceX),\n      },\n\n      b: {\n        height: Math.round(offsetHeight + distanceY),\n      },\n    };\n\n    updateCurContainerStyle({\n      ...newPropsByPos[position],\n    });\n  };\n\n  const handleMouseDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const orderMap = updateComponentMapOrder(id, componentMap);\n    const { x: startX, y: startY } = getClientPosByEvent(e);\n    const left = e.currentTarget.offsetLeft;\n    const top = e.currentTarget.offsetTop;\n\n    updateSelectComponentAndOrderMap(id, orderMap);\n    \n    const move = (moveEvent) => {\n      if (isLocked) {\n        return;\n      }\n      const { x: curX, y: curY } = getClientPosByEvent(moveEvent);\n      const curLeft = curX - startX + left;\n      const curTop = curY - startY + top;\n      updateCurContainerStyle({\n        left: curLeft,\n        top: curTop,\n      });\n    \n    \n    };\n\n    const up = () => {\n      addRecord();\n      document.removeEventListener(\"mousemove\", move);\n      document.removeEventListener(\"mouseup\", up);\n    };\n    document.addEventListener(\"mousemove\", move);\n    document.addEventListener(\"mouseup\", up);\n  };\n\n  return (\n    <div\n      ref={wrapper}\n      key={id}\n      className={cls({\n        [className]: className,\n        [styles.selected]: isSelected,\n      })}\n      style={{\n        position: \"absolute\",\n        cursor: \"move\",\n        ...style,\n        zIndex: index,\n        ...containerProps.style,\n      }}\n      onMouseDown={handleMouseDown}\n      onDragOver={(e) => e.preventDefault()}\n    >\n      {\n        isSelected && !isLocked  &&\n          circleProps.map((circleProp) => {\n            return (\n              (\n                <Circle\n                  addRecord={addRecord}\n                  updateComponentItemByPos={updateComponentItemByPos}\n                  key={circleProp.position}\n                  {...circleProp}\n                />\n              )\n            );\n          })\n      }\n      {\n        isLocked && (\n          <div className={styles.locked}>\n            <Icon size=\"xs\" type=\"lock-fill\" />\n          </div>\n        )\n      }\n      {props.children}\n    </div>\n  );\n}\n\nexport default connect(\n  (state) => ({\n    model: state\n  }),\n  (dispatch) => ({\n    updateCurContainerStyle: (val) =>dispatch(updateCurContainerStyleAction(val)),\n    updateSelectComponentAndOrderMap: (selectComponentId, componentMap) =>\n      dispatch(\n        changeState(\n          {\n            selectComponentId,\n            componentMap,\n          },\n        )\n      ),\n      addRecord: () => dispatch(saveRecords()),\n  })\n)(ResizeWrapper);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { getElementByType } from \"../../../utils\";\nimport ResizeWrapper from \"./ResizeWrapper\";\nimport { GROUP } from '../../../constants';\n\n  // 独立模式下： 没有parentId && 没有children\n  // 组合模式下： 顶层group 中间层group，底层component\n  //    顶层group：无parentId，type类型是group，\n  //    中间层group： 有parentId，type是group 有children\n  //    底层Component： 有parentId， 无children\nfunction Element(props) {\n  const {\n    id,\n    index,\n    item: { type, componentProps, containerProps, parentId },\n    children,\n  } = props;\n  const Component = getElementByType(type);\n  // 独立模式下的Component渲染\n  if(!containerProps) {\n    return null;\n  }\n  if (!parentId && !children) {\n    return (\n      <ResizeWrapper\n        index={index}\n        containerProps={containerProps}\n        id={id}\n      >\n        <Component {...componentProps} />\n      </ResizeWrapper>\n    );\n  }\n  // 组合模式下顶层Group渲染\n  if (!parentId && type === GROUP) {\n    return (\n      <ResizeWrapper\n        index={index}\n        containerProps={containerProps}\n        id={id}\n      >\n        <Component \n          {...componentProps}\n        >\n          {React.Children.map(children, (child)=>{\n            return (\n              // <div \n              //   style={{ \n              //     position: 'absolute', \n              //     // zIndex: -1,\n              //     width:'100%',\n              //     height:'100%'\n              //   }}\n              // >\n                child\n              // </div>\n            )\n          })}\n        </Component>\n      </ResizeWrapper>\n    );\n  }\n // 组合模式下 中间层group渲染\n  if (parentId && type === GROUP && children && children.length > 0) {\n    return (\n      <div\n        style={{\n          position: \"absolute\",\n          cursor: \"move\",\n          ...containerProps.style,\n        }}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  // 组合模式下，内含的Component渲染\n  if (parentId && !children) {\n    return (\n      <div\n      style={{\n        position: \"absolute\",\n        cursor: \"move\",\n        ...containerProps.style,\n      }}\n    >\n      <Component {...componentProps} />\n    </div>\n    )\n  }\n}\n\nexport default connect((state) => state)(Element);\n","import React, { useState, useEffect } from \"react\";\nimport cls from \"classnames\";\nimport useDeepCompareEffect from 'use-deep-compare-effect';\nimport { connect } from \"react-redux\";\nimport styles from \"./index.module.scss\";\nimport {\n  updateCurContainerStyleAction,\n} from '../../../store/actions'\n\nconst diff: number = 4;\nconst initlineArr = [\n  {\n    type: \"xt\",\n    show: false,\n    left: 0,\n    top: 0,\n  },\n  {\n    type: \"xc\",\n    show: false,\n    left: 0,\n    top: 0,\n  },\n  {\n    type: \"xb\",\n    show: false,\n    left: 0,\n    top: 0,\n  },\n  {\n    type: \"yl\",\n    show: false,\n    left: 0,\n    top: 0,\n  },\n  {\n    type: \"yc\",\n    show: false,\n    left: 0,\n    top: 0,\n  },\n  {\n    type: \"yr\",\n    show: false,\n    left: 0,\n    top: 0,\n  },\n];\n\nfunction MarkLine(props) {\n  \n  const [lineArr, setLineArr] = useState(initlineArr);\n  const { \n    componentMap, \n    selectComponentId, \n    updateCurContainerStyle,\n  } = props;\n\n  const isNearly = (dragVal, targetVal): boolean => {\n    return Math.abs(dragVal - targetVal) <= diff;\n  }\n    \n\n  const getCurrentComponentsPosition = () => {\n    const currentComponent = componentMap[selectComponentId] || {};\n    const { containerProps } = currentComponent || {};\n    const { style } = containerProps || {};\n    const { top: curTop, left: curLeft, width, height } = style || {};\n    const curBottom = curTop + height;\n    const curRight = curLeft + width;\n\n    return {\n      curTop,\n      curLeft,\n      curBottom,\n      curRight,\n      curWidth: width,\n      curHeight: height,\n    };\n  };\n\n  const updateLineArr = ({ type, left, top, show = true }) => {\n    setLineArr((prev) => {\n      return prev.map((item) => {\n        if (item.type === type) {\n          return {\n            ...item,\n            show,\n            top,\n            left,\n          };\n        }\n        return item;\n      });\n    });\n  };\n\n  const {\n    curTop,\n    curLeft,\n    curBottom,\n    curRight,\n    curWidth,\n    curHeight,\n  } = getCurrentComponentsPosition();\n\n  const hideLine = () => {\n    setLineArr(initlineArr);\n  };\n\n  useDeepCompareEffect(() => {\n    Object.keys(componentMap).forEach((id) => {\n      const { containerProps } = componentMap[id];\n      // 当前组件被组合组件包括，或者选中的组件是当前组件不显示markline\n      if (id === selectComponentId || componentMap[id]['parentId']) return;\n      const { top, left, width, height } = containerProps.style;\n      const right = left + width;\n      const bottom = top + height;\n      const centerPos = { left: left + width / 2, top: top + height / 2 };\n      const curCenterPos = {\n        left: curLeft + curWidth / 2,\n        top: curTop + curTop / 2,\n      };\n\n\n\n      if (isNearly(curCenterPos.top, centerPos.top)) {\n        updateLineArr({\n          type: \"xc\",\n          top: centerPos.top,\n          left: 0,\n        });\n        updateCurContainerStyle({\n          top: top - (curHeight - height) / 2,\n          left: curLeft,\n        });\n      }\n\n      if (isNearly(curCenterPos.left, centerPos.left)) {\n        updateLineArr({\n          type: \"yc\",\n          top: 0,\n          left: centerPos.left,\n        });\n\n        updateCurContainerStyle({\n          top: curTop,\n          left: left - (curWidth - width) / 2,\n        });\n      }\n\n      if (isNearly(curCenterPos.left, centerPos.left)) {\n        updateLineArr({\n          type: \"yc\",\n          left: curCenterPos.left,\n          top: 0,\n        });\n      }\n      // 两个盒子top接近时\n      if (isNearly(curTop, top) || isNearly(curBottom, top)) {\n        updateLineArr({\n          type: \"xt\",\n          top,\n          left: 0,\n        });\n\n        if (isNearly(curTop, top)) {\n          updateCurContainerStyle({\n            top,\n            left: curLeft,\n          });\n        }\n\n        if (isNearly(curBottom, top)) {\n          updateCurContainerStyle({\n            top: top - curHeight,\n            left: curLeft,\n          });\n        }\n      }\n\n      if (isNearly(curLeft, left) || isNearly(curRight, left)) {\n        updateLineArr({\n          type: \"yl\",\n          left,\n          top: 0,\n        });\n\n        if (isNearly(curLeft, left)) {\n          updateCurContainerStyle({\n            left,\n            top: curTop,\n          });\n        }\n\n        if (isNearly(curRight, left)) {\n          updateCurContainerStyle({\n            left: left - curWidth,\n            top: curTop,\n          });\n        }\n      }\n      // 当right接近时 ||  当dragElement left接近 element右边时\n      if (isNearly(curRight, right) || isNearly(curLeft, right)) {\n        updateLineArr({\n          type: \"yr\",\n          left: right,\n          top: 0,\n        });\n\n        if (isNearly(curRight, right)) {\n          updateCurContainerStyle({\n            left: right - curWidth,\n            top: curTop,\n          });\n        }\n\n        if (isNearly(curLeft, right)) {\n          updateCurContainerStyle({\n            left: right,\n            top: curTop,\n          });\n        }\n      }\n\n      if (isNearly(curBottom, bottom) || isNearly(curTop, bottom)) {\n        updateLineArr({\n          type: \"xb\",\n          left: 0,\n          top: bottom,\n        });\n\n        if (isNearly(curBottom, bottom)) {\n          updateCurContainerStyle({\n            left: curLeft,\n            top: top + height - curHeight,\n          });\n        }\n\n        if (isNearly(curTop, bottom)) {\n          updateCurContainerStyle({\n            left: curLeft,\n            top: height + top,\n          });\n        }\n      }\n    });\n  }, [curBottom, curTop, curLeft, curRight, componentMap]);\n\n  useEffect(() => {\n    document.addEventListener(\"mouseup\", hideLine);\n    return () => {\n      document.removeEventListener(\"mouseup\", hideLine);\n    };\n  }, []);\n\n  return (\n    <div className={styles.markline}>\n      {lineArr.map(({ left, top, show, type }) => (\n        <div\n          style={{\n            left,\n            top,\n          }}\n          key={type}\n          className={cls({\n            [styles.hide]: !show,\n            [styles.hor]: type.includes(\"x\"),\n            [styles.ver]: type.includes(\"y\"),\n            [styles.line]: true,\n          })}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default connect(\n  (state) => state,\n  (dispatch) => ({\n    updateCurContainerStyle: (val) =>\n      dispatch(updateCurContainerStyleAction(val)),\n  })\n)(MarkLine);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n// import ResizeWrapper from \"../ResizeWrapper\";\n// import { IArea } from \"../../../interface\";\n\nfunction Area(props) {\n  const { \n    areaPos: {\n      startPos, \n      endPos,\n    },\n    // containerProps,\n    // selectComponentId,\n    // updateSelectComponent, \n  } = props;\n  const width = Math.abs(endPos.left - startPos.left);\n  const height = Math.abs(endPos.top - startPos.top);\n  let boxLeft = endPos.left > startPos.left ? startPos.left : endPos.left;\n  let boxTop = endPos.top > startPos.top ? startPos.top : endPos.top;\n  if (!width || !height) {\n    return null;\n  }\n\n  return (\n      <div\n        style={{\n          zIndex: 999999,\n          position: \"absolute\",\n          width,\n          height,\n          left: boxLeft,\n          top: boxTop,\n          border: \"1px solid #409eff\",\n        }}\n      />\n  );\n}\n\nexport default connect((state) => state)(Area);\n","import React, { useState } from \"react\";\nimport { v4 as uuid } from \"uuid\";\nimport { connect } from 'react-redux';\nimport cloneDeep from 'lodash/cloneDeep';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport GridLine from \"./GridLine\";\nimport { plainDatatoTree } from '../../utils';\nimport styles from \"./index.module.scss\";\n\nimport { \n  changeState, \n  getElementPosByEvent, \n  getElementByType, \n  findDOMByEventAndId,\n} from '../../utils';\nimport Element from './Element';\nimport MarkLine from './MarkLine';\nimport Area from './Area';\nimport { IArea } from '../../interface';\nimport { \n  cancelRecords, \n  redoRecords, \n  saveRecords,\n} from \"../../store/actions\";\nimport { GROUP } from '../../constants';\n\nconst id = 'editorWrapper';\n\nfunction Editor(props) {\n  const [showGridLine, toggleGridLine] = useState(false);\n  const {\n    model,\n    updateComponentMap,\n    updateComponentMapAndSelectId,\n    updateSelectComponent,\n    updateAreaPos,\n    addRecords,\n    cancelRecords,\n    redoRecords,\n  } = props;\n\n  const {\n    canvasWidth,\n    canvasHeight,\n    scale: scaleRatio,\n    componentMap,\n    selectComponentId,\n  }= model;\n\n\n  const initialAreaPos = {\n    startPos: {\n      left: 0,\n      top: 0,\n    },\n    endPos: {\n      left: 0,\n      top: 0,\n    }\n  }\n const hideArea = () => {\n   updateAreaPos(initialAreaPos, [])\n }\n\n const findChildrenIdBySelectId = (selectedId) => {\n   return Object.keys(componentMap).filter((id) => {\n      return componentMap[id].parentId === selectedId\n   })\n }\n\n const deleteElement = (parentId, copyState) => {\n\n  const { type } = copyState[parentId];\n  if (type === GROUP) {\n    const childs =  findChildrenIdBySelectId(parentId);\n    childs.forEach(id => {\n      deleteElement(id, copyState)\n     });\n   } else {\n    delete copyState[parentId]\n   }\n }\n\n const handleKey = (key) => {\n   const keyHandleMap = {\n     'backspace': () => {\n      const copyState = cloneDeep(componentMap);\n      deleteElement(selectComponentId, copyState);\n      // 清除selectedId和更新componentMap属性\n      updateComponentMapAndSelectId(copyState, null)\n     },\n     'cmd+h': () => {\n       toggleGridLine(!showGridLine)\n     },\n     'cmd+z': () => {\n       // 撤销\n       cancelRecords();\n     },\n     'cmd+shift+z': () => {\n       // 重做\n       redoRecords();\n     }\n   }\n\n   keyHandleMap[key]();\n\n \n  }\n\n /**\n  * @description 计算组合最小包围盒子\n  * @param containIds \n  * @returns IArea\n  */\n const getMinWrapperAreaPos = (containIds: string[]) => {\n  let startLeft = Number.MAX_SAFE_INTEGER;\n  let endLeft = -Number.MAX_SAFE_INTEGER;\n  let startTop = Number.MAX_SAFE_INTEGER;\n  let endTop = -Number.MAX_SAFE_INTEGER;\n  containIds.forEach(id => {\n    const {left, top, width, height } = componentMap[id].containerProps.style;\n\n    if (left < startLeft) {\n      startLeft = left;\n    } \n\n    if(endLeft < left + width) {\n      endLeft = left + width;\n    }\n\n    if (top < startTop) {\n      startTop = top;\n    } \n\n    if(endTop < top + height) {\n      endTop = top + height;\n    }\n\n  });\n\n  return {  \n    startPos: {\n      left: startLeft,\n      top: startTop,\n    },\n    endPos: {\n      left: endLeft,\n      top: endTop,\n    }\n  }\n }\n\n  const handleMouseDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    updateSelectComponent(null); \n    const dom = findDOMByEventAndId(e, id);\n    const { left , top } = dom.getBoundingClientRect();\n    const startPos = getElementPosByEvent(e); // 不要在move里执行，否则要加e.presist();\n    let areaPos: IArea = initialAreaPos;\n\n    const move = (moveEvent) => {\n      areaPos = {\n        startPos,\n        endPos:  {\n          left: moveEvent.clientX - left,\n          top: moveEvent.clientY - top,\n        },\n      };\n      updateAreaPos(areaPos, []);\n    }\n    \n    const up = (e) => {\n      // 计算盒子\n      const containIds: string[] = [];\n      Object.keys(componentMap).forEach(id => {\n        const { startPos, endPos} = areaPos;\n        const boxInfo = {\n          left: Math.min(startPos.left, endPos.left),\n          top: Math.min(startPos.top, endPos.top),\n          width: Math.abs(endPos.left - startPos.left),\n          height: Math.abs(endPos.top - startPos.top),\n        }\n        const componentinfo = componentMap[id];\n        const { \n          containerProps:{\n            style: {\n              left,\n              top,\n              width,\n              height,\n            }\n          }\n       } = componentinfo; \n\n       if (\n            boxInfo.left < left && \n            boxInfo.top < top && \n            boxInfo.width + boxInfo.left > left + width && \n            boxInfo.height + boxInfo.top > height + top \n            && !componentinfo.isLocked\n         ) {\n         containIds.push(id);\n       }\n\n      });\n\n      if(containIds.length > 1) {\n        const minWrapperPos = getMinWrapperAreaPos(containIds)\n        updateAreaPos(minWrapperPos, containIds);\n      } else {\n        hideArea();\n      }\n\n      document.removeEventListener(\"mousemove\", move);\n      document.removeEventListener(\"mouseup\", up);\n    };\n    document.addEventListener(\"mousemove\", move);\n    document.addEventListener(\"mouseup\", up);\n  }\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { left, top } = getElementPosByEvent(e);\n    const type = e.dataTransfer.getData(\"type\");\n    if (type) {\n      const { initialProps } = getElementByType(type);\n      const { \n        top: initialTop, \n        left: initialLeft,\n        right: initialRight,\n        bottom: initialBottom, \n        width, \n        height, ...componentProps \n      } = initialProps || {};\n      const containerProps = {\n        style: {\n          top,\n          left,\n          width,\n          height,\n        }\n      };\n      const updatedMap = {\n        ...componentMap,\n        [uuid()]: {\n          type,\n          containerProps,\n          componentProps,\n        }\n      };\n      updateComponentMap(updatedMap);\n      addRecords();\n    }\n  }\n\n  const renderElement = (data) => {\n    if(!data) return null;\n    return Object.keys(data).map((uuid, index) => {\n      const item = data[uuid];\n      return (\n          <Element \n            id={uuid} \n            key={uuid} \n            item={item} \n            index={index}\n          >\n            {renderElement(item.children)}\n          </Element>\n      )\n    })\n  }\n  const transferData = plainDatatoTree(componentMap);\n\n  return (\n    <div \n      id={id} \n      className={styles.editor} \n      style={{\n        width: canvasWidth,\n        height: canvasHeight,\n        transformOrigin: '0 0',\n        transform: `scale(${scaleRatio /100})`\n      }}\n    >\n      <KeyboardEventHandler\n        handleKeys={['backspace', 'cmd+h', 'cmd+z', 'cmd+shift+z']}\n        onKeyEvent={handleKey}\n      />\n      <div\n        onMouseDown={handleMouseDown}\n        style={{ position: \"absolute\", width: \"100%\", height: \"100%\" }}\n        onDragOver={(e) => e.preventDefault()}\n        onDrop={handleDrop}\n      >\n        <GridLine show={showGridLine} />\n        {\n         renderElement(transferData)\n        }\n      </div>\n      {showGridLine && <MarkLine />}\n      <Area />\n    </div>\n  );\n}\n\nexport default connect(\n  state => ({model: state}), \n  dispatch => ({\n    updateComponentMap: (val) => dispatch(changeState('componentMap', val)),\n    updateSelectComponent: (id) => dispatch(changeState(\"selectComponentId\", id)),\n    updateAreaPos: (position, containIds) => dispatch(changeState({areaPos: position, containIds})),\n    updateComponentMapAndSelectId: (val, id) => {\n      dispatch(changeState({componentMap: val, selectComponentId: id}))\n    },\n    addRecords: () => dispatch(saveRecords()),\n    cancelRecords: step => dispatch(cancelRecords(step)),\n    redoRecords: ()=> dispatch(redoRecords()),\n  })\n  )(Editor);\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Input, Button } from '@ali/wind';\nimport styles from \"./index.module.scss\";\n\nfunction AttributePanel(props) {\n  const { selectComponentId, componentMap } = props;\n  const {\n    containerProps,\n    componentProps,\n  } = componentMap[selectComponentId] || {};\n\n  return (\n    selectComponentId && \n    <div className={styles.attributePanel}>\n      x: {containerProps.style.left}\n      y: {containerProps.style.top}\n      width: {containerProps.style.width}\n      height: {containerProps.style.height}\n      {/* <Input.TextArea\n        rows={20}\n        value={JSON.stringify(containerProps)} \n        // onChange= {handleChange}\n      /> */}\n    </div>\n  );\n}\n\nexport default connect((state) => state, (dispatch)=>({\n\n}))(AttributePanel);\n","import React from \"react\";\nimport { Dialog } from \"@ali/wind\";\nimport { connect } from \"react-redux\";\n\nimport { changeState, plainDatatoTree, getElementByType } from \"../../utils\";\nimport { GROUP } from \"../../constants\";\n\nfunction Preview(props) {\n  const { model, updateState } = props;\n  const { previewVisible, canvasWidth, canvasHeight, componentMap } = model;\n  if (!previewVisible) {\n    return null;\n  }\n\n  const transferData = plainDatatoTree(componentMap);\n\n  const renderElement = (transferData) => {\n    if (!transferData) {\n      return null;\n    }\n    return Object.keys(transferData).map((id, index) => {\n      const { type, containerProps, componentProps, children } = transferData[\n        id\n      ];\n      const Component = getElementByType(type);\n\n      const renderComponent = () => {\n        //group渲染\n        if (type === GROUP) {\n          return renderElement(children);\n        }\n\n        // 独立component渲染\n        if (type !== GROUP) {\n          return <Component {...componentProps} />;\n        }\n\n        return null;\n      };\n\n      return (\n        <div key={id} style={{ position: \"absolute\", ...containerProps.style }}>\n          {renderComponent()}\n        </div>\n      );\n    });\n  };\n\n  const closeDialog = () =>\n    updateState({\n      ...model,\n      previewVisible: false,\n    });\n\n  return (\n    <Dialog\n      visible={previewVisible}\n      title=\"预览\"\n      onClose={closeDialog\n      }\n      onCancel={closeDialog}\n      onOk={closeDialog}\n    >\n      <div\n        style={{\n          position: \"relative\",\n          width: canvasWidth,\n          height: canvasHeight,\n        }}\n      >\n        {renderElement(transferData)}\n      </div>\n    </Dialog>\n  );\n}\n\nexport default connect(\n  (state) => ({\n    model: state,\n  }),\n  (dispatch) => ({\n    updateState: (val) => dispatch(changeState(val)),\n  })\n)(Preview);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Stats from 'stats-js';\nimport store from './store';\nimport {Provider} from 'react-redux';\nimport Header from './views/Header';\nimport ComponentList from './views/ComponentPanel';\nimport Editor from './views/Editor';\nimport AttributePanel from './views/AttributePanel';\nimport Preview from './views/Preview';\nimport styles from './index.module.css';\nimport '@ali/wind/dist/wind.min.css';\n\nconst Parent = () => {\n\n  return (\n    <div className={styles.container}>\n      <Header></Header>\n      <div className={styles.content}>\n        <ComponentList />\n        <div className={styles.editor}>\n          <Editor />\n        </div>\n        <AttributePanel />\n        <Preview />\n      </div>\n    </div>\n  )\n}\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <Parent />\n  </Provider>\n, document.getElementById(\"root\"));\n\nconst stats = new Stats();\nstats.showPanel( 0 ); // 0: fps, 1: ms, 2: mb, 3+: custom\ndocument.body.appendChild( stats.dom );\n\nfunction animate() {\n \n    stats.begin();\n \n    stats.end();\n \n    requestAnimationFrame( animate );\n \n}\n \nrequestAnimationFrame( animate );","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__nGceP\",\"numberPicker\":\"Header_numberPicker__1Eeju\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"componentList\":\"ComponentPanel_componentList__1-9lm\",\"cell\":\"ComponentPanel_cell__3jcko\",\"text\":\"ComponentPanel_text__3d8cg\"};"],"sourceRoot":""}